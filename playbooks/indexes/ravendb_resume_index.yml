---
- name: Resume Index
  hosts: ravendb_nodes
  gather_facts: no

  tasks:
    - name: Include Python prerequisites
      include_role:
        name: ravendb_node
        tasks_from: ravendb_python_prerequisites.yml

    - name: Ensure RavenDB Index is resumed (check mode)
      ravendb.community.index:
        url: "http://{{ ansible_host }}:8080"
        database_name: "my_database"
        index_name: "Orders/ByCompany"
        mode: resumed
      check_mode: yes

    - name: Ensure RavenDB Index is resumed
      ravendb.community.index:
        url: "http://{{ ansible_host }}:8080"
        database_name: "my_database"
        index_name: "Orders/ByCompany"
        mode: resumed

    - name: Ensure RavenDB Index is resumed (idempotency check)
      ravendb.community.index:
        url: "http://{{ ansible_host }}:8080"
        database_name: "my_database"
        index_name: "Orders/ByCompany"
        mode: resumed
